class l{constructor(e){this.gameEngine=e,this.seasons=this.initializeSeasons(),this.currentSeason=null,this.activeTheme=null,this.holidays=this.initializeHolidays(),this.activeHolidays=[],this.init()}init(){logger.info("ðŸŽ„ Initializing Seasonal Content Manager..."),this.updateCurrentSeason(),this.checkHolidays(),logger.info("âœ… Seasonal Content Manager initialized")}initializeSeasons(){return{SPRING:{name:"Spring Awakening",color:"#FF69B4",secondaryColor:"#00FF00",ambientColor:16755455,fogColor:16768511,months:[2,3,4],effects:["cherry_blossoms","butterflies","flower_petals"],music:"spring_melody",externalAssets:{decorations:"Kenney/spring_decorations",particles:"Kenney/petal_particles",textures:"PolyHaven/spring_grass"}},SUMMER:{name:"Summer Festival",color:"#FFFF00",secondaryColor:"#FF6600",ambientColor:16777130,fogColor:16777198,months:[5,6,7],effects:["sun_rays","heat_shimmer","fireflies"],music:"summer_festival",externalAssets:{decorations:"Kenney/summer_items",particles:"Kenney/sun_particles",textures:"PolyHaven/summer_sand"}},AUTUMN:{name:"Autumn Harvest",color:"#FF6600",secondaryColor:"#FFFF00",ambientColor:16737792,fogColor:16755302,months:[8,9,10],effects:["falling_leaves","harvest_moon","pumpkins"],music:"autumn_breeze",externalAssets:{decorations:"Kenney/autumn_items",particles:"Kenney/leaf_particles",textures:"PolyHaven/autumn_leaves"}},WINTER:{name:"Winter Wonderland",color:"#FFFFFF",secondaryColor:"#00FFFF",ambientColor:11206655,fogColor:16777215,months:[11,0,1],effects:["snowfall","ice_crystals","aurora"],music:"winter_carols",externalAssets:{decorations:"Kenney/winter_items",particles:"Kenney/snow_particles",textures:"PolyHaven/snow"}}}}initializeHolidays(){return{NEW_YEAR:{name:"New Year Celebration",color:"#FFFF00",startDate:{month:0,day:1},duration:7,rewards:["new_year_fireworks","celebration_hat"],events:["fireworks_show","countdown_event"],externalAssets:{decorations:"Kenney/new_year",effects:"fireworks_particles"}},VALENTINE:{name:"Love Festival",color:"#FF69B4",startDate:{month:1,day:14},duration:7,rewards:["heart_candy","love_potion","cupid_wings"],events:["matchmaking_event","love_quest"],externalAssets:{decorations:"Kenney/valentine",effects:"heart_particles"}},EASTER:{name:"Egg Hunt Festival",color:"#00FFFF",startDate:{month:3,day:15},duration:7,rewards:["easter_eggs","bunny_ears","chocolate"],events:["egg_hunt","bunny_boss"],externalAssets:{decorations:"Kenney/easter",models:"Quaternius/easter_bunny"}},HALLOWEEN:{name:"Spooky Festival",color:"#FF6600",secondaryColor:"#9900FF",startDate:{month:9,day:25},duration:7,rewards:["pumpkin_head","witch_hat","candy"],events:["trick_or_treat","haunted_dungeon","pumpkin_boss"],externalAssets:{decorations:"Kenney/halloween",models:"Quaternius/spooky_models",effects:"spooky_particles"}},CHRISTMAS:{name:"Winter Holiday",color:"#FF0000",secondaryColor:"#00FF00",startDate:{month:11,day:18},duration:14,rewards:["santa_hat","candy_cane","gift_boxes","christmas_tree"],events:["santa_boss","gift_exchange","snowman_building"],externalAssets:{decorations:"Kenney/christmas",models:"Quaternius/christmas_items",effects:"snow_particles"}}}}updateCurrentSeason(){const e=new Date().getMonth();for(const[t,s]of Object.entries(this.seasons))if(s.months.includes(e)){this.currentSeason!==t&&(this.currentSeason=t,this.activeTheme=s,this.applySeasonalTheme(),logger.info(`ðŸŒ¸ Season changed to: ${s.name}`));break}}applySeasonalTheme(){if(!this.activeTheme)return;const e=this.activeTheme;this.gameEngine.scene&&this.gameEngine.scene.fog&&this.gameEngine.scene.fog.color.setHex(e.fogColor),e.effects.forEach(t=>{this.activateSeasonalEffect(t)}),logger.info(`âœ¨ Applied ${e.name} theme`),this.gameEngine.magicalBackgroundSystem&&this.gameEngine.magicalBackgroundSystem.createSparkBurst({x:0,y:5,z:0},e.color,150)}activateSeasonalEffect(e){logger.info(`ðŸŽ¨ Activating seasonal effect: ${e}`)}checkHolidays(){const e=new Date,t=e.getMonth(),s=e.getDate();Object.entries(this.holidays).forEach(([a,o])=>{const n=this.isHolidayActive(o,t,s),i=this.activeHolidays.includes(a);n&&!i?this.startHoliday(a):!n&&i&&this.endHoliday(a)})}isHolidayActive(e,t,s){const a=e.startDate.month,o=e.startDate.day,n=o+e.duration;if(t===a)return s>=o&&s<n;if(n>31){const i=(a+1)%12;if(t===i)return s<n-31}return!1}startHoliday(e){const t=this.holidays[e];t&&(this.activeHolidays.push(e),logger.info(`ðŸŽ‰ Holiday event started: ${t.name}!`),this.applyHolidayDecorations(t),t.events.forEach(s=>{logger.info(`ðŸŽ¯ Holiday event active: ${s}`)}),this.gameEngine.magicalBackgroundSystem&&this.gameEngine.magicalBackgroundSystem.createSparkBurst({x:0,y:8,z:0},t.color,200))}endHoliday(e){const t=this.activeHolidays.indexOf(e);t>-1&&this.activeHolidays.splice(t,1);const s=this.holidays[e];logger.info(`Holiday event ended: ${s.name}`),this.removeHolidayDecorations(s)}applyHolidayDecorations(e){logger.info(`ðŸŽ„ Applying decorations for ${e.name}`)}removeHolidayDecorations(e){logger.info(`Removing decorations for ${e.name}`)}getSeasonalRewards(){const e=[];return this.activeTheme&&e.push({type:"seasonal",season:this.currentSeason,items:["seasonal_costume","seasonal_pet","seasonal_mount"]}),this.activeHolidays.forEach(t=>{const s=this.holidays[t];e.push({type:"holiday",holiday:t,items:s.rewards})}),e}update(e){Date.now()%36e5<1e3&&(this.updateCurrentSeason(),this.checkHolidays())}}export{l as SeasonalContentManager};
