class c{constructor(e){this.gameEngine=e,this.campaigns=this.initializeCampaigns(),this.activeQuests=[],this.completedQuests=new Set,this.currentChapter=1,this.questProgress=new Map,this.questObjectives=new Map,this.init()}init(){console.log("ðŸ“– Initializing Quest Campaign System..."),console.log("âœ… Quest Campaign System initialized with",Object.keys(this.campaigns).length,"campaigns")}initializeCampaigns(){return{MAIN_STORY:{name:"The Emberveil Prophecy",description:"Uncover the ancient prophecy and save the realm from darkness",color:"#FF00FF",chapters:[{id:"CHAPTER_1",name:"Awakening",description:"Your journey begins in the village of Emberfall",quests:[{id:"QUEST_1_1",name:"A New Beginning",description:"Meet the village elder and learn about your destiny",objectives:[{type:"TALK_TO_NPC",target:"ELDER_MARCUS",count:1},{type:"EXPLORE_AREA",target:"VILLAGE_SQUARE",count:1}],rewards:{xp:100,gold:50,items:["STARTER_SWORD"]},externalAssets:{npc:"Mixamo/elder_character",cutscene:"cinematic_intro"}},{id:"QUEST_1_2",name:"First Steps",description:"Learn basic combat by defeating slimes",objectives:[{type:"KILL_ENEMIES",target:"SLIME",count:10},{type:"COLLECT_ITEMS",target:"SLIME_GEL",count:5}],rewards:{xp:150,gold:75,items:["HEALTH_POTION"]}},{id:"QUEST_1_3",name:"The Dark Forest",description:"Investigate strange occurrences in the nearby forest",objectives:[{type:"EXPLORE_AREA",target:"DARK_FOREST",count:1},{type:"KILL_ENEMIES",target:"WOLF",count:5},{type:"FIND_CLUE",target:"MYSTERIOUS_SYMBOL",count:1}],rewards:{xp:200,gold:100,items:["FOREST_BOW"]}}]},{id:"CHAPTER_2",name:"Rising Darkness",description:"Dark forces emerge from the shadows",quests:[{id:"QUEST_2_1",name:"Shadow Cultists",description:"Stop the cultists from performing a dark ritual",objectives:[{type:"KILL_ENEMIES",target:"CULTIST",count:15},{type:"DESTROY_OBJECT",target:"RITUAL_ALTAR",count:3}],rewards:{xp:300,gold:150,items:["SHADOW_DAGGER"]}},{id:"QUEST_2_2",name:"The First Boss",description:"Defeat the Cultist Leader",objectives:[{type:"KILL_BOSS",target:"CULTIST_LEADER",count:1}],rewards:{xp:500,gold:300,items:["LEGENDARY_ARMOR"]},externalAssets:{boss:"Mixamo/cultist_boss",arena:"Quaternius/dark_temple"}}]},{id:"CHAPTER_3",name:"The Crystal Caves",description:"Discover the ancient crystals of power",quests:[{id:"QUEST_3_1",name:"Into the Depths",description:"Navigate the treacherous crystal caves",objectives:[{type:"EXPLORE_AREA",target:"CRYSTAL_CAVES",count:1},{type:"COLLECT_ITEMS",target:"MAGIC_CRYSTAL",count:10}],rewards:{xp:400,gold:200,items:["CRYSTAL_STAFF"]}}]}]},SIDE_STORY_MAGE:{name:"The Arcane Mysteries",description:"Master the arcane arts and uncover magical secrets",color:"#9900FF",requiredClass:"MAGE",chapters:[{id:"MAGE_1",name:"Apprentice Trials",description:"Prove your worth to the Mage Guild",quests:[{id:"MAGE_QUEST_1",name:"Elemental Mastery",description:"Demonstrate control over fire, ice, and lightning",objectives:[{type:"CAST_SPELL",target:"FIREBALL",count:20},{type:"CAST_SPELL",target:"ICE_SHARD",count:20},{type:"CAST_SPELL",target:"LIGHTNING_BOLT",count:20}],rewards:{xp:300,gold:150,items:["ARCANE_TOME"]}}]}]},SIDE_STORY_WARRIOR:{name:"Path of the Blade",description:"Become a legendary warrior",color:"#FF0066",requiredClass:"WARRIOR",chapters:[{id:"WARRIOR_1",name:"Trial by Combat",description:"Prove your strength in battle",quests:[{id:"WARRIOR_QUEST_1",name:"Arena Champion",description:"Win 10 arena battles",objectives:[{type:"WIN_ARENA_BATTLE",count:10}],rewards:{xp:300,gold:150,items:["CHAMPIONS_SWORD"]}}]}]},SEASONAL_SPRING:{name:"Festival of Blossoms",description:"Celebrate the spring festival with special quests",color:"#FF69B4",seasonal:!0,season:"SPRING",chapters:[{id:"SPRING_1",name:"Cherry Blossom Festival",description:"Help prepare for the festival",quests:[{id:"SPRING_QUEST_1",name:"Flower Gathering",description:"Collect cherry blossoms for decorations",objectives:[{type:"COLLECT_ITEMS",target:"CHERRY_BLOSSOM",count:50}],rewards:{xp:200,gold:100,items:["FESTIVAL_HAT"]}}]}]},DAILY_BOUNTIES:{name:"Daily Bounties",description:"Complete daily bounty quests for rewards",color:"#FFFF00",daily:!0,chapters:[{id:"DAILY_1",name:"Monster Hunting",description:"Hunt down dangerous monsters",quests:[{id:"DAILY_BOUNTY_1",name:"Goblin Extermination",description:"Defeat 20 goblins",objectives:[{type:"KILL_ENEMIES",target:"GOBLIN",count:20}],rewards:{xp:150,gold:100},repeatable:!0,resetDaily:!0}]}]}}}startQuest(e){const t=this.findQuest(e);return t?this.activeQuests.some(s=>s.id===e)?(console.log("Quest already active"),!1):this.completedQuests.has(e)&&!t.repeatable?(console.log("Quest already completed"),!1):(this.questProgress.set(e,{objectives:t.objectives.map(s=>({...s,current:0})),startTime:Date.now()}),this.activeQuests.push({id:e,...t}),console.log(`ðŸ“œ Quest started: ${t.name}`),this.gameEngine.magicalBackgroundSystem&&this.gameEngine.magicalBackgroundSystem.createSparkBurst({x:0,y:2,z:0},"#FFFF00",50),!0):(console.warn(`Quest not found: ${e}`),!1)}updateQuestProgress(e,t,s,r=1){const a=this.questProgress.get(e);if(!a)return;let n=!1;return a.objectives.forEach(i=>{i.type===t&&i.target===s&&(i.current=Math.min(i.current+r,i.count),i.current>=i.count&&!i.completed&&(i.completed=!0,console.log(`âœ… Objective completed: ${i.type} ${i.target}`)))}),a.objectives.every(i=>i.completed)&&(this.completeQuest(e),n=!0),n}completeQuest(e){const t=this.activeQuests.findIndex(r=>r.id===e);if(t===-1)return;const s=this.activeQuests[t];s.rewards&&(s.rewards.xp&&this.gameEngine.player&&this.gameEngine.player.gainXP(s.rewards.xp),s.rewards.gold&&this.gameEngine.player&&(this.gameEngine.player.gold+=s.rewards.gold),s.rewards.items&&s.rewards.items.forEach(r=>{console.log(`ðŸŽ Reward: ${r}`)})),this.completedQuests.add(e),this.activeQuests.splice(t,1),this.questProgress.delete(e),console.log(`ðŸŽ‰ Quest completed: ${s.name}!`),this.gameEngine.magicalBackgroundSystem&&this.gameEngine.magicalBackgroundSystem.createSparkBurst({x:0,y:3,z:0},"#00FF00",100)}findQuest(e){for(const t of Object.values(this.campaigns))for(const s of t.chapters){const r=s.quests.find(a=>a.id===e);if(r)return r}return null}getAvailableQuests(){const e=[];return Object.values(this.campaigns).forEach(t=>{t.seasonal&&t.season!==this.getCurrentSeason()||t.requiredClass&&this.gameEngine.player&&this.gameEngine.player.class!==t.requiredClass||t.chapters.forEach(s=>{s.quests.forEach(r=>{this.activeQuests.some(a=>a.id===r.id)||this.completedQuests.has(r.id)&&!r.repeatable||e.push({campaignName:t.name,chapterName:s.name,...r})})})}),e}getCurrentSeason(){const e=new Date().getMonth();return e>=2&&e<=4?"SPRING":e>=5&&e<=7?"SUMMER":e>=8&&e<=10?"FALL":"WINTER"}getQuestProgress(e){return this.questProgress.get(e)}update(e){const t=new Date;t.getHours()===0&&t.getMinutes()===0&&this.resetDailyQuests()}resetDailyQuests(){Object.values(this.campaigns).forEach(e=>{e.daily&&e.chapters.forEach(t=>{t.quests.forEach(s=>{s.resetDaily&&this.completedQuests.delete(s.id)})})}),console.log("ðŸ”„ Daily quests reset")}}export{c as QuestCampaignSystem};
