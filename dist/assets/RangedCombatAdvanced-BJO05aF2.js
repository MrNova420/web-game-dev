import{l as e}from"./index-Bf-_4h4A.js";import"./three-DTQjiZ7L.js";import"./cannon-DPZWuR6y.js";class f{constructor(){this.activeProjectiles=[],this.gravity=9.8,this.animations={bow_draw:"/assets/animations/bow_draw_arrow.fbx",bow_shoot:"/assets/animations/bow_release.fbx",bow_charged:"/assets/animations/bow_charged_shot.fbx",crossbow_reload:"/assets/animations/crossbow_reload.fbx",gun_shoot:"/assets/animations/gun_fire.fbx"},this.projectileModels={arrow_basic:"/assets/models/projectiles/arrow_basic.glb",arrow_fire:"/assets/models/projectiles/arrow_fire.glb",arrow_ice:"/assets/models/projectiles/arrow_ice.glb",bolt:"/assets/models/projectiles/crossbow_bolt.glb",bullet:"/assets/models/projectiles/magic_bullet.glb"},this.vfx={arrow_trail:"/assets/particles/arrow_trail.png",muzzle_flash:"/assets/particles/muzzle_flash.png",impact:"/assets/particles/arrow_impact.png"}}shoot(t,s,o,i=1){const c=this.getShootAnimation(o),r=this.getProjectileModel(o);e.info(`${t.id} shoots ${o}`),e.info(`  Animation: ${c}`),e.info(`  Projectile: ${r}`),e.info(`  Charge: ${(i*100).toFixed(0)}%`);const n=50*i,a=this.calculateTrajectory(t.position,s.position,n);return this.activeProjectiles.push({position:t.position.clone(),velocity:a.velocity,model:r,damage:100*i,piercing:i>1.5}),a}calculateTrajectory(t,s,o){const i=s.x-t.x,c=s.y-t.y,r=s.z-t.z,n=Math.sqrt(i*i+r*r),a=Math.atan2(c,n),l=n/(o*Math.cos(a));return{velocity:{x:i/l,y:o*Math.sin(a),z:r/l},time:l,arc:!0}}multiShot(t,s){e.info(`${t.id} MULTI-SHOT (${s.length} arrows)`),e.info(`  Animation: ${this.animations.bow_shoot}`);const o=[];for(const i of s)o.push(this.shoot(t,i,"BOW",1));return o}update(t){for(let s=this.activeProjectiles.length-1;s>=0;s--){const o=this.activeProjectiles[s];o.velocity.y-=this.gravity*t,o.position.x+=o.velocity.x*t,o.position.y+=o.velocity.y*t,o.position.z+=o.velocity.z*t,o.position.y<=0&&(e.info("Projectile hit ground"),e.info(`  VFX: ${this.vfx.impact}`),this.activeProjectiles.splice(s,1))}}getShootAnimation(t){return t==="BOW"?this.animations.bow_shoot:t==="CROSSBOW"?this.animations.crossbow_reload:this.animations.gun_shoot}getProjectileModel(t){return t==="BOW"?this.projectileModels.arrow_basic:t==="CROSSBOW"?this.projectileModels.bolt:this.projectileModels.bullet}}export{f as RangedCombatAdvanced};
