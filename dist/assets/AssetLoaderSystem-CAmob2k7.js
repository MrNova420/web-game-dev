import{s as c,b0 as m,ab as i,a,c as r,M as n,C as l}from"./three-DTQjiZ7L.js";import{G as h,F as u}from"./index-DTyX5CH-.js";import"./cannon-DPZWuR6y.js";class b{constructor(e){this.gameEngine=e,this.gltfLoader=new h,this.fbxLoader=new u,this.textureLoader=new c,this.audioLoader=new m,this.loadedAssets=new Map,this.assetManifest=this.createAssetManifest(),this.loadingProgress=0,this.isLoading=!1,this.loadQueue=[]}createAssetManifest(){return{players:{warrior:"/assets/models/characters/player/warrior.glb",mage:"/assets/models/characters/player/mage.glb",rogue:"/assets/models/characters/player/rogue.glb",archer:"/assets/models/characters/player/archer.glb"},companions:{smoke_siren:"/assets/models/characters/companions/smoke_siren.glb",blade_muse:"/assets/models/characters/companions/blade_muse.glb",herb_witch:"/assets/models/characters/companions/herb_witch.glb",cyber_dryad:"/assets/models/characters/companions/cyber_dryad.glb"},enemies:{goblin_scout:"/assets/models/enemies/goblin_scout.glb",goblin_warrior:"/assets/models/enemies/goblin_warrior.glb",orc_grunt:"/assets/models/enemies/orc_grunt.glb",dragon_whelp:"/assets/models/enemies/dragon_whelp.glb",slime:"/assets/models/enemies/slime.glb"},bosses:{crimson_empress:"/assets/models/bosses/crimson_empress.glb",frost_queen:"/assets/models/bosses/frost_queen.glb",shadow_assassin:"/assets/models/bosses/shadow_assassin.glb",lightning_valkyrie:"/assets/models/bosses/lightning_valkyrie.glb",dragon_empress:"/assets/models/bosses/dragon_empress.glb"},weapons:{iron_sword:"/assets/models/weapons/swords/iron_sword.glb",steel_sword:"/assets/models/weapons/swords/steel_sword.glb",battle_axe:"/assets/models/weapons/axes/battle_axe.glb",dagger:"/assets/models/weapons/daggers/dagger.glb",bow:"/assets/models/weapons/bows/short_bow.glb",staff:"/assets/models/weapons/staves/wooden_staff.glb"},environment:{tree_1:"/assets/models/environment/trees/tree_1.glb",rock_1:"/assets/models/environment/rocks/rock_1.glb",grass:"/assets/models/environment/grass/grass_patch.glb",building_1:"/assets/models/environment/buildings/house_1.glb"},textures:{grass:"/assets/textures/environment/grass_albedo.jpg",stone:"/assets/textures/environment/stone_albedo.jpg",wood:"/assets/textures/environment/wood_albedo.jpg",metal:"/assets/textures/materials/metal_albedo.jpg"},audio:{music_menu:"/assets/audio/music/menu_theme.mp3",music_battle:"/assets/audio/music/battle_theme.mp3",sfx_sword:"/assets/audio/sfx/sword_swing.mp3",sfx_hit:"/assets/audio/sfx/hit_impact.mp3"},ui:{icon_health:"/assets/ui/icons/health.png",icon_mana:"/assets/ui/icons/mana.png",icon_sword:"/assets/ui/icons/sword.png",button_normal:"/assets/ui/buttons/button_normal.png"}}}async loadPlayerCharacter(e){const s=this.assetManifest.players[e];if(!s)return console.warn(`Player character ${e} not found in manifest`),this.createPlaceholder("player");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`player_${e}`,o),console.log(`âœ… Loaded FREE player model from Mixamo: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("player")}}async loadCompanionModel(e){const s=this.assetManifest.companions[e];if(!s)return console.warn(`Companion ${e} not found in manifest`),this.createPlaceholder("companion");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`companion_${e}`,o),console.log(`âœ… Loaded FREE companion model: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("companion")}}async loadEnemyModel(e){const s=this.assetManifest.enemies[e];if(!s)return console.warn(`Enemy ${e} not found in manifest`),this.createPlaceholder("enemy");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`enemy_${e}`,o),console.log(`âœ… Loaded FREE enemy model from Quaternius: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("enemy")}}async loadBossModel(e){const s=this.assetManifest.bosses[e];if(!s)return console.warn(`Boss ${e} not found in manifest`),this.createPlaceholder("boss");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`boss_${e}`,o),console.log(`âœ… Loaded FREE boss model from Sketchfab: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("boss")}}async loadWeaponModel(e){const s=this.assetManifest.weapons[e];if(!s)return console.warn(`Weapon ${e} not found in manifest`),this.createPlaceholder("weapon");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`weapon_${e}`,o),console.log(`âœ… Loaded FREE weapon model: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("weapon")}}async loadEnvironmentModel(e){const s=this.assetManifest.environment[e];if(!s)return console.warn(`Environment object ${e} not found in manifest`),this.createPlaceholder("environment");try{const o=await this.loadGLTF(s);return this.loadedAssets.set(`env_${e}`,o),console.log(`âœ… Loaded FREE environment model from Quaternius/Poly Pizza: ${e}`),o}catch{return console.warn(`Asset not found: ${s}. Using placeholder.`),this.createPlaceholder("environment")}}async loadTexture(e){const s=this.assetManifest.textures[e];if(!s)return console.warn(`Texture ${e} not found in manifest`),new i;try{const o=await this.loadTextureFile(s);return this.loadedAssets.set(`texture_${e}`,o),console.log(`âœ… Loaded FREE texture from Poly Haven: ${e}`),o}catch{return console.warn(`Texture not found: ${s}. Using default.`),new i}}async loadAudio(e){const s=this.assetManifest.audio[e];if(!s)return console.warn(`Audio ${e} not found in manifest`),null;try{const o=await this.loadAudioFile(s);return this.loadedAssets.set(`audio_${e}`,o),console.log(`âœ… Loaded FREE audio from Freesound/Incompetech: ${e}`),o}catch{return console.warn(`Audio not found: ${s}`),null}}loadGLTF(e){return new Promise((s,o)=>{this.gltfLoader.load(e,t=>{s(t.scene)},t=>{},t=>{o(t)})})}loadTextureFile(e){return new Promise((s,o)=>{this.textureLoader.load(e,t=>{s(t)},void 0,t=>{o(t)})})}loadAudioFile(e){return new Promise((s,o)=>{this.audioLoader.load(e,t=>{s(t)},void 0,t=>{o(t)})})}createPlaceholder(e){const s={player:()=>{const o=new l(.5,1,4,8),t=new n({color:26367});return new a(o,t)},companion:()=>{const o=new l(.5,1,4,8),t=new n({color:16711782});return new a(o,t)},enemy:()=>{const o=new r(1,1,1),t=new n({color:16711680});return new a(o,t)},boss:()=>{const o=new l(1,2,4,8),t=new n({color:11141120});return new a(o,t)},weapon:()=>{const o=new r(.1,1,.1),t=new n({color:11184810});return new a(o,t)},environment:()=>{const o=new r(1,1,1),t=new n({color:65280});return new a(o,t)}};return console.log(`ðŸ“¦ Using placeholder for ${e} (download FREE asset from sources in ASSET_INTEGRATION_PLAN.md)`),s[e]?s[e]():new a}async loadAssetBatch(e){this.isLoading=!0;const s=[];for(const t of e)switch(t.type){case"player":s.push(this.loadPlayerCharacter(t.id));break;case"companion":s.push(this.loadCompanionModel(t.id));break;case"enemy":s.push(this.loadEnemyModel(t.id));break;case"boss":s.push(this.loadBossModel(t.id));break;case"weapon":s.push(this.loadWeaponModel(t.id));break;case"texture":s.push(this.loadTexture(t.id));break;case"audio":s.push(this.loadAudio(t.id));break}const o=await Promise.allSettled(s);return this.isLoading=!1,o.map((t,d)=>({asset:e[d],success:t.status==="fulfilled",data:t.status==="fulfilled"?t.value:null,error:t.status==="rejected"?t.reason:null}))}getAsset(e){return this.loadedAssets.get(e)}isAssetLoaded(e){return this.loadedAssets.has(e)}getLoadingProgress(){return this.loadingProgress}clearCache(){for(const[e,s]of this.loadedAssets)s.geometry&&s.geometry.dispose(),s.material&&(Array.isArray(s.material)?s.material.forEach(o=>o.dispose()):s.material.dispose());this.loadedAssets.clear()}getStats(){return{totalLoaded:this.loadedAssets.size,isLoading:this.isLoading,progress:this.loadingProgress,manifestSize:Object.keys(this.assetManifest).length}}}export{b as AssetLoaderSystem};
