import{l as t}from"./index-Bf-_4h4A.js";import"./three-DTQjiZ7L.js";import"./cannon-DPZWuR6y.js";class p{constructor(){this.castingEntities=new Map,this.spellSchools=["FIRE","ICE","LIGHTNING","NATURE","HOLY","DARK","ARCANE","BLOOD"],this.castAnimations={instant_cast:"/assets/animations/magic_instant_cast.fbx",channel_start:"/assets/animations/magic_channel_start.fbx",channeling:"/assets/animations/magic_channeling.fbx",cast_finish:"/assets/animations/magic_cast_finish.fbx",overcharge:"/assets/animations/magic_overcharge.fbx"},this.spellVFX={fireball:"/assets/particles/fireball_cast.png",ice_storm:"/assets/particles/ice_storm.png",lightning_bolt:"/assets/particles/lightning_cast.png",heal:"/assets/particles/heal_glow.png",dark_pulse:"/assets/particles/dark_energy.png",arcane_missiles:"/assets/particles/arcane_missiles.png"}}castSpell(s,i,n,a){return t.info(`${s} casting ${i} (${n}s, ${a} mana)`),n===0?(t.info("  Instant cast!"),t.info(`  Animation: ${this.castAnimations.instant_cast}`),{success:!0,instant:!0}):(t.info(`  Animation: ${this.castAnimations.channel_start}`),this.castingEntities.set(s,{spell:i,startTime:Date.now(),castTime:n*1e3,interruptible:!0}),{success:!0,channeling:!0})}interruptCast(s){const i=this.castingEntities.get(s);return i&&i.interruptible?(t.info(`${s} spell interrupted!`),this.castingEntities.delete(s),!0):!1}update(s){const i=Date.now();for(const[n,a]of this.castingEntities.entries())if(i-a.startTime>=a.castTime){t.info(`${n} completed ${a.spell}!`),t.info(`  Animation: ${this.castAnimations.cast_finish}`);const e=this.spellVFX[a.spell.toLowerCase()]||this.spellVFX.fireball;t.info(`  VFX: ${e}`),this.castingEntities.delete(n)}}}export{p as MagicCastingSystem};
