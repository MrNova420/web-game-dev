class m{constructor(){this.enhancements=new Map,this.activeFeatures=new Set,this.playerFeedback=[],logger.info("[GameplayEnhancementSystem] Initializing gameplay enhancements..."),this.setupEnhancements()}setupEnhancements(){this.enhancements.set("combatJuice",{hitStop:!0,screenShake:!0,slowMo:!0,particleBursts:!0,soundEffects:!0}),this.enhancements.set("exploration",{discoveryRewards:!0,landmarkMarkers:!0,treasureHints:!0,environmentalStories:!0}),this.enhancements.set("progression",{levelUpCelebration:!0,skillUnlockEffect:!0,achievementPopup:!0,progressBars:!0,milestoneRewards:!0}),this.enhancements.set("qol",{autoLoot:!1,questTracker:!0,minimapIcons:!0,fastTravel:!0,repairAll:!0}),this.enhancements.set("social",{emoteWheel:!0,guildChat:!0,partyMarkers:!0,friendStatus:!0}),logger.info(`[GameplayEnhancementSystem] ${this.enhancements.size} enhancement categories loaded`)}applyCombatJuice(e){const t=this.enhancements.get("combatJuice");t&&(t.hitStop&&e.type==="hit"&&this.applyHitStop(e.damage),t.screenShake&&e.type==="impact"&&this.applyScreenShake(e.intensity||1),t.slowMo&&e.critical&&this.applySlowMotion(.3,300),t.particleBursts&&this.createParticleBurst(e.position,e.element||"physical"),t.soundEffects&&this.playImpactSound(e.type,e.damage))}applyHitStop(e){const t=Math.min(e*2,100);if(logger.info(`[GameplayEnhancementSystem] Hit stop: ${t}ms`),typeof window<"u"&&window.game){const n=window.game.timeScale||1;window.game.timeScale=0,setTimeout(()=>{window.game&&(window.game.timeScale=n)},t)}}applyScreenShake(e){if(logger.info(`[GameplayEnhancementSystem] Screen shake: ${e}`),typeof window<"u"&&window.game&&window.game.camera){const t=window.game.camera,n=t.position.clone(),a=e*.1,o=200,s=Date.now(),i=()=>{Date.now()-s<o?(t.position.x=n.x+(Math.random()-.5)*a,t.position.y=n.y+(Math.random()-.5)*a,requestAnimationFrame(i)):t.position.copy(n)};i()}}applySlowMotion(e,t){if(logger.info(`[GameplayEnhancementSystem] Slow motion: ${e}x for ${t}ms`),typeof window<"u"&&window.game){const n=window.game.timeScale||1;window.game.timeScale=e,setTimeout(()=>{window.game&&(window.game.timeScale=n)},t)}}createParticleBurst(e,t){logger.info(`[GameplayEnhancementSystem] Particle burst: ${t} at`,e)}playImpactSound(e,t){const n=Math.min(t/100,1);logger.info(`[GameplayEnhancementSystem] Impact sound: ${e}, volume: ${n}`)}enhanceExploration(e){const t=this.enhancements.get("exploration");t&&(t.discoveryRewards&&e.type==="secret"&&this.grantDiscoveryReward(e),t.landmarkMarkers&&e.type==="landmark"&&this.addLandmarkMarker(e.location,e.name),t.treasureHints&&this.provideTreasureHint(e.location))}grantDiscoveryReward(e){const t={xp:e.rarity*100,gold:e.rarity*50,title:e.rare?`${e.name} Explorer`:null};logger.info("[GameplayEnhancementSystem] Discovery reward:",t),this.showRewardNotification(t)}showRewardNotification(e){logger.info("[GameplayEnhancementSystem] Showing reward notification:",e)}addLandmarkMarker(e,t){logger.info(`[GameplayEnhancementSystem] Adding landmark: ${t} at`,e)}provideTreasureHint(e){logger.info("[GameplayEnhancementSystem] Checking for nearby treasure...")}enhanceProgression(e){const t=this.enhancements.get("progression");t&&(t.levelUpCelebration&&e.type==="levelUp"&&this.celebrateLevelUp(e.newLevel),t.skillUnlockEffect&&e.type==="skillUnlock"&&this.showSkillUnlockEffect(e.skill),t.achievementPopup&&e.type==="achievement"&&this.showAchievementPopup(e.achievement),t.milestoneRewards&&e.isMilestone&&this.grantMilestoneReward(e))}celebrateLevelUp(e){logger.info(`[GameplayEnhancementSystem] LEVEL UP! New level: ${e}`)}showSkillUnlockEffect(e){logger.info(`[GameplayEnhancementSystem] Skill unlocked: ${e.name}`)}showAchievementPopup(e){logger.info(`[GameplayEnhancementSystem] Achievement unlocked: ${e.name}`)}grantMilestoneReward(e){const t={type:"milestone",level:e.level,items:["Milestone Chest","Title"],xp:1e3,gold:500};logger.info(`[GameplayEnhancementSystem] Milestone reward at level ${e.level}:`,t),this.showRewardNotification(t)}applyQoLFeatures(){const e=this.enhancements.get("qol");e&&logger.info("[GameplayEnhancementSystem] QoL features available:",e)}toggleFeature(e,t,n){const a=this.enhancements.get(e);return a&&a.hasOwnProperty(t)?(a[t]=n,logger.info(`[GameplayEnhancementSystem] ${e}.${t} = ${n}`),!0):!1}getEnhancementSettings(){const e={};for(const[t,n]of this.enhancements.entries())e[t]={...n};return e}getFeedbackSummary(){return{total:this.playerFeedback.length,positive:this.playerFeedback.filter(e=>e.sentiment==="positive").length,negative:this.playerFeedback.filter(e=>e.sentiment==="negative").length,recent:this.playerFeedback.slice(-10)}}}export{m as GameplayEnhancementSystem};
