class h{constructor(){this.activeProjectiles=[],this.gravity=9.8,this.animations={bow_draw:"/assets/animations/bow_draw_arrow.fbx",bow_shoot:"/assets/animations/bow_release.fbx",bow_charged:"/assets/animations/bow_charged_shot.fbx",crossbow_reload:"/assets/animations/crossbow_reload.fbx",gun_shoot:"/assets/animations/gun_fire.fbx"},this.projectileModels={arrow_basic:"/assets/models/projectiles/arrow_basic.glb",arrow_fire:"/assets/models/projectiles/arrow_fire.glb",arrow_ice:"/assets/models/projectiles/arrow_ice.glb",bolt:"/assets/models/projectiles/crossbow_bolt.glb",bullet:"/assets/models/projectiles/magic_bullet.glb"},this.vfx={arrow_trail:"/assets/particles/arrow_trail.png",muzzle_flash:"/assets/particles/muzzle_flash.png",impact:"/assets/particles/arrow_impact.png"}}shoot(o,s,t,i=1){const l=this.getShootAnimation(t),e=this.getProjectileModel(t);console.log(`${o.id} shoots ${t}`),console.log(`  Animation: ${l}`),console.log(`  Projectile: ${e}`),console.log(`  Charge: ${(i*100).toFixed(0)}%`);const a=50*i,r=this.calculateTrajectory(o.position,s.position,a);return this.activeProjectiles.push({position:o.position.clone(),velocity:r.velocity,model:e,damage:100*i,piercing:i>1.5}),r}calculateTrajectory(o,s,t){const i=s.x-o.x,l=s.y-o.y,e=s.z-o.z,a=Math.sqrt(i*i+e*e),r=Math.atan2(l,a),c=a/(t*Math.cos(r));return{velocity:{x:i/c,y:t*Math.sin(r),z:e/c},time:c,arc:!0}}multiShot(o,s){console.log(`${o.id} MULTI-SHOT (${s.length} arrows)`),console.log(`  Animation: ${this.animations.bow_shoot}`);const t=[];for(const i of s)t.push(this.shoot(o,i,"BOW",1));return t}update(o){for(let s=this.activeProjectiles.length-1;s>=0;s--){const t=this.activeProjectiles[s];t.velocity.y-=this.gravity*o,t.position.x+=t.velocity.x*o,t.position.y+=t.velocity.y*o,t.position.z+=t.velocity.z*o,t.position.y<=0&&(console.log("Projectile hit ground"),console.log(`  VFX: ${this.vfx.impact}`),this.activeProjectiles.splice(s,1))}}getShootAnimation(o){return o==="BOW"?this.animations.bow_shoot:o==="CROSSBOW"?this.animations.crossbow_reload:this.animations.gun_shoot}getProjectileModel(o){return o==="BOW"?this.projectileModels.arrow_basic:o==="CROSSBOW"?this.projectileModels.bolt:this.projectileModels.bullet}}export{h as RangedCombatAdvanced};
