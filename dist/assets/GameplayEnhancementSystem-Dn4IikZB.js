import{l as n}from"./index-Bf-_4h4A.js";import"./three-DTQjiZ7L.js";import"./cannon-DPZWuR6y.js";class u{constructor(){this.enhancements=new Map,this.activeFeatures=new Set,this.playerFeedback=[],n.info("[GameplayEnhancementSystem] Initializing gameplay enhancements..."),this.setupEnhancements()}setupEnhancements(){this.enhancements.set("combatJuice",{hitStop:!0,screenShake:!0,slowMo:!0,particleBursts:!0,soundEffects:!0}),this.enhancements.set("exploration",{discoveryRewards:!0,landmarkMarkers:!0,treasureHints:!0,environmentalStories:!0}),this.enhancements.set("progression",{levelUpCelebration:!0,skillUnlockEffect:!0,achievementPopup:!0,progressBars:!0,milestoneRewards:!0}),this.enhancements.set("qol",{autoLoot:!1,questTracker:!0,minimapIcons:!0,fastTravel:!0,repairAll:!0}),this.enhancements.set("social",{emoteWheel:!0,guildChat:!0,partyMarkers:!0,friendStatus:!0}),n.info(`[GameplayEnhancementSystem] ${this.enhancements.size} enhancement categories loaded`)}applyCombatJuice(e){const t=this.enhancements.get("combatJuice");t&&(t.hitStop&&e.type==="hit"&&this.applyHitStop(e.damage),t.screenShake&&e.type==="impact"&&this.applyScreenShake(e.intensity||1),t.slowMo&&e.critical&&this.applySlowMotion(.3,300),t.particleBursts&&this.createParticleBurst(e.position,e.element||"physical"),t.soundEffects&&this.playImpactSound(e.type,e.damage))}applyHitStop(e){const t=Math.min(e*2,100);if(n.info(`[GameplayEnhancementSystem] Hit stop: ${t}ms`),typeof window<"u"&&window.game){const a=window.game.timeScale||1;window.game.timeScale=0,setTimeout(()=>{window.game&&(window.game.timeScale=a)},t)}}applyScreenShake(e){if(n.info(`[GameplayEnhancementSystem] Screen shake: ${e}`),typeof window<"u"&&window.game&&window.game.camera){const t=window.game.camera,a=t.position.clone(),i=e*.1,o=200,r=Date.now(),s=()=>{Date.now()-r<o?(t.position.x=a.x+(Math.random()-.5)*i,t.position.y=a.y+(Math.random()-.5)*i,requestAnimationFrame(s)):t.position.copy(a)};s()}}applySlowMotion(e,t){if(n.info(`[GameplayEnhancementSystem] Slow motion: ${e}x for ${t}ms`),typeof window<"u"&&window.game){const a=window.game.timeScale||1;window.game.timeScale=e,setTimeout(()=>{window.game&&(window.game.timeScale=a)},t)}}createParticleBurst(e,t){n.info(`[GameplayEnhancementSystem] Particle burst: ${t} at`,e)}playImpactSound(e,t){const a=Math.min(t/100,1);n.info(`[GameplayEnhancementSystem] Impact sound: ${e}, volume: ${a}`)}enhanceExploration(e){const t=this.enhancements.get("exploration");t&&(t.discoveryRewards&&e.type==="secret"&&this.grantDiscoveryReward(e),t.landmarkMarkers&&e.type==="landmark"&&this.addLandmarkMarker(e.location,e.name),t.treasureHints&&this.provideTreasureHint(e.location))}grantDiscoveryReward(e){const t={xp:e.rarity*100,gold:e.rarity*50,title:e.rare?`${e.name} Explorer`:null};n.info("[GameplayEnhancementSystem] Discovery reward:",t),this.showRewardNotification(t)}showRewardNotification(e){n.info("[GameplayEnhancementSystem] Showing reward notification:",e)}addLandmarkMarker(e,t){n.info(`[GameplayEnhancementSystem] Adding landmark: ${t} at`,e)}provideTreasureHint(e){n.info("[GameplayEnhancementSystem] Checking for nearby treasure...")}enhanceProgression(e){const t=this.enhancements.get("progression");t&&(t.levelUpCelebration&&e.type==="levelUp"&&this.celebrateLevelUp(e.newLevel),t.skillUnlockEffect&&e.type==="skillUnlock"&&this.showSkillUnlockEffect(e.skill),t.achievementPopup&&e.type==="achievement"&&this.showAchievementPopup(e.achievement),t.milestoneRewards&&e.isMilestone&&this.grantMilestoneReward(e))}celebrateLevelUp(e){n.info(`[GameplayEnhancementSystem] LEVEL UP! New level: ${e}`)}showSkillUnlockEffect(e){n.info(`[GameplayEnhancementSystem] Skill unlocked: ${e.name}`)}showAchievementPopup(e){n.info(`[GameplayEnhancementSystem] Achievement unlocked: ${e.name}`)}grantMilestoneReward(e){const t={type:"milestone",level:e.level,items:["Milestone Chest","Title"],xp:1e3,gold:500};n.info(`[GameplayEnhancementSystem] Milestone reward at level ${e.level}:`,t),this.showRewardNotification(t)}applyQoLFeatures(){const e=this.enhancements.get("qol");e&&n.info("[GameplayEnhancementSystem] QoL features available:",e)}toggleFeature(e,t,a){const i=this.enhancements.get(e);return i&&i.hasOwnProperty(t)?(i[t]=a,n.info(`[GameplayEnhancementSystem] ${e}.${t} = ${a}`),!0):!1}getEnhancementSettings(){const e={};for(const[t,a]of this.enhancements.entries())e[t]={...a};return e}getFeedbackSummary(){return{total:this.playerFeedback.length,positive:this.playerFeedback.filter(e=>e.sentiment==="positive").length,negative:this.playerFeedback.filter(e=>e.sentiment==="negative").length,recent:this.playerFeedback.slice(-10)}}}export{u as GameplayEnhancementSystem};
